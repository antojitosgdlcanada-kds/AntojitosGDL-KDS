<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Bar - Antojitos Guadalajara</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body style="background:#f0fff5">
<div class="container mt-3">
  <h3 class="text-center text-warning"><i class="fas fa-glass-cheers"></i> Bar</h3>
  <div id="orders"></div>
</div>
<script>
const server = "http://192.168.0.10:5000";
const audio = new Audio("assets/sounds/manos.mp3");
async function cargar(){
  const res = await fetch(`${server}/orden/bar`);
  const data = await res.json();
  const div = document.getElementById("orders");
  div.innerHTML = data.map(o=>`
    <div class='card mt-2 p-2'>
      <b>Mesa ${o.mesa}</b><br>${o.notas}
      <button class='btn btn-warning btn-sm mt-2' onclick='listo(${o.id})'>Listo</button>
    </div>
  `).join("");
}
async function listo(id){
  await fetch(`${server}/orden/${id}/listo`);
  audio.play();
  cargar();
}
setInterval(cargar, 4000);
cargar();
</script>
</body>
</html>
